"use strict";var __webpack_exports__={};const PREFIX="jsc",ACCORDIONSELECTOR=`[data-${PREFIX}-accCon]`;let toggleTimeoutId;function randmoId(t=8){let e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=i.length;for(let a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*o));return e}class JscAccordion{constructor(t){this.container=null;let e=t.container;"string"==typeof e&&(e=document.querySelector(e)),e&&e instanceof HTMLElement!=!1&&(this.container=e,t.button&&(this.button=t.button),void 0!==t.collapsed&&(t.collapsed?!0===t.collapsed&&(this.collapsed=!0):this.collapsed=!1),this._init())}_init(){if(this.container){if(this.container.style.overflow="hidden",""===this.container.id){let t=randmoId();for(;document.getElementById(t);)t=randmoId();this.container.id=`${PREFIX}${t}`}if(null!==this.container.getAttribute(`data-${PREFIX}-accCon`)&&"false"===this.container.getAttribute(`data-${PREFIX}-accCon`)||this.container.setAttribute(`data-${PREFIX}-accCon`,"true"),void 0===this.collapsed){const t=this.container.getAttribute("data-collapse");this.collapsed="false"!==t}this.container.setAttribute("data-collapse",this.collapsed+""),this.collapsed&&(this.container.style.display="none"),this._init_target()}}_init_target(){if(!this.button)return;let t=null;if(this.button instanceof HTMLElement?t=this.button:"string"==typeof this.button&&(t=document.querySelector(this.button)),t)this._finalizeTarget(t);else if(this.button instanceof HTMLCollection||this.button instanceof NodeList||this.button instanceof Array){Array.from(this.button).forEach((t=>{if(t instanceof HTMLCollection||t instanceof NodeList)return;let e=t;"string"==typeof e&&(e=document.querySelector(e)),e&&this._finalizeTarget(e)}))}}_finalizeTarget(t){const e=this.container.id;let i;t.setAttribute(`data-${PREFIX}-target`,e),t.setAttribute("aria-expanded",`${!this.collapsed}`),t.setAttribute("aria-controls",e),this.collapsed?(i=void 0!==this.collapseText?this.collapseText:t.getAttribute("data-collapsetext"),t.classList.add("collapsed")):i=void 0!==this.expendText?this.expendText:t.getAttribute("data-expendtext"),null!==i&&(t.innerText=i)}enable(){var t;null===(t=this.container)||void 0===t||t.setAttribute(`data-${PREFIX}-accCon`,"true")}disable(){var t;null===(t=this.container)||void 0===t||t.setAttribute(`data-${PREFIX}-accCon`,"false")}toggle(){this.container instanceof HTMLElement&&accordionToggle(this.container)}}function accordionToggle(t){let e="true"===t.dataset.collapse;const i=360;let o=t.offsetHeight;if(t.classList.contains("colexping"))return;t.classList.add("colexping"),clearTimeout(toggleTimeoutId),t.style.transition="height 300ms ease-in-out",toggleTimeoutId=setTimeout((()=>{t.style.transition=""}),i),e?(t.style.display="",t.style.height="auto",o=t.offsetHeight,t.style.height="0",setTimeout((()=>{t.style.height=o+"px"}),0),setTimeout((()=>{t.style.height="",t.classList.remove("colexping")}),i),t.dataset.collapse="false",e=!1):e||(t.style.height=o+"px",setTimeout((()=>{t.style.height="0"}),5),setTimeout((()=>{t.style.display="none",t.style.height="",t.classList.remove("colexping")}),i),t.dataset.collapse="true",e=!0);document.querySelectorAll(`[data-${PREFIX}-target="${t.id}"]`).forEach((t=>{let i;e&&(i=t.dataset.collapsetext,t.setAttribute("aria-expanded","false"),t.classList.add("collapsed")),e||(i=t.dataset.expendtext,t.setAttribute("aria-expanded","true"),t.classList.remove("collapsed")),void 0!==i&&(t.innerText=i)}))}function accordionToggleEventHandler(t){const e=t.target.dataset[`${PREFIX}Target`];if(null===e||""===e)return;const i=document.querySelector(`${ACCORDIONSELECTOR}#${e}`);i&&"false"!==i.getAttribute(`data-${PREFIX}-accCon`)&&!i.classList.contains("colexping")&&accordionToggle(i)}window.onload=()=>{document.body.addEventListener("click",accordionToggleEventHandler);document.querySelectorAll(ACCORDIONSELECTOR).forEach((t=>{var e;let i;const o=t.id;""===o?i=null===(e=t.closest(".jsc-accordion"))||void 0===e?void 0:e.querySelector(`[data-${PREFIX}-target]`):""!==o&&(i=document.querySelectorAll(`[data-${PREFIX}-target="${t.id}"]`)),new JscAccordion({container:t,button:i})}))};
//# sourceMappingURL=accordion.min.js.map