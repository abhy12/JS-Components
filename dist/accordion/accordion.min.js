"use strict";var __webpack_exports__={};const PREFIX="jsc",ACCORDIONSELECTOR=`[data-${PREFIX}-accCon]`;let toggleTimeoutId;function randmoId(e=8){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length;for(let n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*s));return t}class JscAccordion{constructor(t){this.container=null;let i=t.container;typeof i=="string"&&(i=document.querySelector(i)),!(!i||!(i instanceof HTMLElement))&&(this.container=i,t.button&&(this.button=t.button),t.collapsed!==void 0&&(t.collapsed?t.collapsed===!0&&(this.collapsed=!0):this.collapsed=!1),this._init())}_init(){if(this.container){if(this.container.style.overflow="hidden",this.container.id===""){let t=randmoId();for(;;){if(document.getElementById(t)){t=randmoId();continue}break}this.container.id=`${PREFIX}${t}`}(this.container.getAttribute(`data-${PREFIX}-accCon`)===null||this.container.getAttribute(`data-${PREFIX}-accCon`)!=="false")&&this.container.setAttribute(`data-${PREFIX}-accCon`,"true"),this.collapsed===void 0&&(this.container.getAttribute("data-collapse")==="false"?this.collapsed=!1:this.collapsed=!0),this.container.setAttribute("data-collapse",this.collapsed+""),this.collapsed&&(this.container.style.display="none"),this._init_target()}}_init_target(){if(!this.button)return;let t=null;if(this.button instanceof HTMLElement?t=this.button:typeof this.button=="string"&&(t=document.querySelector(this.button)),t){this._finalizeTarget(t);return}(this.button instanceof HTMLCollection||this.button instanceof NodeList||this.button instanceof Array)&&Array.from(this.button).forEach(s=>{if(s instanceof HTMLCollection||s instanceof NodeList)return;let n=s;typeof n=="string"&&(n=document.querySelector(n)),n&&this._finalizeTarget(n)})}_finalizeTarget(t){const i=this.container.id;t.setAttribute(`data-${PREFIX}-target`,i),t.setAttribute("aria-expanded",`${!this.collapsed}`),t.setAttribute("aria-controls",i);let s;this.collapsed?(this.collapseText!==void 0?s=this.collapseText:s=t.getAttribute("data-collapsetext"),t.classList.add("collapsed")):this.expendText!==void 0?s=this.expendText:s=t.getAttribute("data-expendtext"),s!==null&&(t.innerText=s)}enable(){var t;(t=this.container)==null||t.setAttribute(`data-${PREFIX}-accCon`,"true")}disable(){var t;(t=this.container)==null||t.setAttribute(`data-${PREFIX}-accCon`,"false")}toggle(){this.container instanceof HTMLElement&&accordionToggle(this.container)}}function accordionToggle(e){let t=e.dataset.collapse==="true";const i=300+60;let s=e.offsetHeight;if(e.classList.contains("colexping"))return;e.classList.add("colexping"),clearTimeout(toggleTimeoutId),e.style.transition=`height ${i-60}ms ease-in-out`,toggleTimeoutId=setTimeout(()=>{e.style.transition=""},i),t?(e.style.display="",e.style.height="auto",s=e.offsetHeight,e.style.height="0",setTimeout(()=>{e.style.height=s+"px"},0),setTimeout(()=>{e.style.height="",e.classList.remove("colexping")},i),e.dataset.collapse="false",t=!1):t||(e.style.height=s+"px",setTimeout(()=>{e.style.height="0"},5),setTimeout(()=>{e.style.display="none",e.style.height="",e.classList.remove("colexping")},i),e.dataset.collapse="true",t=!0),document.querySelectorAll(`[data-${PREFIX}-target="${e.id}"]`).forEach(a=>{let l;t&&(l=a.dataset.collapsetext,a.setAttribute("aria-expanded","false"),a.classList.add("collapsed")),t||(l=a.dataset.expendtext,a.setAttribute("aria-expanded","true"),a.classList.remove("collapsed")),l!==void 0&&(a.innerText=l)})}function accordionToggleEventHandler(e){const i=e.target.dataset[`${PREFIX}Target`];if(i===null||i==="")return;const s=document.querySelector(`${ACCORDIONSELECTOR}#${i}`);!s||s.getAttribute(`data-${PREFIX}-accCon`)==="false"||s.classList.contains("colexping")||accordionToggle(s)}window.onload=()=>{document.body.addEventListener("click",accordionToggleEventHandler),document.querySelectorAll(ACCORDIONSELECTOR).forEach(t=>{var i;let s;const n=t.id;n===""?s=(i=t.closest(".jsc-accordion"))==null?void 0:i.querySelector(`[data-${PREFIX}-target]`):n!==""&&(s=document.querySelectorAll(`[data-${PREFIX}-target="${t.id}"]`)),new JscAccordion({container:t,button:s})})};

//# sourceMappingURL=accordion.min.js.map